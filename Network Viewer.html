<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>University Network Viewer</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    label { font-weight: bold; }
    select, button { margin: 10px 0; padding: 5px; }
    iframe { border: 1px solid #ccc; }
    #graphFrame { width: 100%; height: 800px; margin-top: 20px; }
    #graphStats { margin-top: 20px; font-size: 14px; color: #333; }
  </style>
</head>
<body>

<h2>🎓 University Network Viewer</h2>

<!-- Step 1 -->
<label>Step 1: Select View Type</label><br>
<select id="viewType" onchange="updateUniversitySelection()">
  <option value="">-- Select View Type --</option>
  <option value="single">Single University</option>
  <option value="all">All Universities</option>
</select><br>

<!-- Step 2 -->
<label>Step 2: Select Graph Type</label><br>
<select id="graphType">
  <option value="">-- Select Graph Type --</option>
  <option value="external_entity">university&external_entity</option>
  <option value="external_entity_category">university&external_entity_category</option>
  <option value="internal_entity">university&internal_entity</option>
  <option value="full_view">university&all_relations (merged)</option>
</select><br>

<!-- University Selection -->
<div id="universitySelection" style="display: none;">
  <label>Select University</label><br>
  <select id="universities" size="5" style="width: 300px;"></select>
</div>

<button onclick="loadGraph()">Load Graph</button>

<!-- 📊 统计 -->
<div id="graphStats"></div>

<!-- 🔗 图展示 -->
<iframe id="graphFrame" src=""></iframe>

<!-- 🔢 内联图数据 -->
<script>
  const graphStatsData = {
    "university&external_entity": {
      "nodes": 2328,
      "edges": 3051,
      "betweenness": [
        "Universities UK",
        "European University Association|EUA",
        "Association of Commonwealth Universities|ACU",
        "University College London",
        "University of London",
        "University of Sussex",
        "University of York",
        "Imperial College London",
        "London School of Economics",
        "Association of Commonwealth Universities"
      ],
      "closeness": [
        "Universities UK",
        "Association of Commonwealth Universities|ACU",
        "European University Association|EUA",
        "University of London",
        "University College London",
        "Lancaster University",
        "University of Warwick",
        "University of St Andrews",
        "University of Surrey",
        "Imperial College London"
      ],
      "centrality": [
        "Universities UK",
        "European University Association|EUA",
        "University of York",
        "Association of Commonwealth Universities|ACU",
        "University College London",
        "Imperial College London",
        "University of Sussex",
        "University of Warwick",
        "Durham University",
        "University of Sheffield"
      ]
    },
    "university&external_entity_category": {
      "nodes": 166,
      "edges": 915,
      "betweenness": [
        "Higher Education and Research Institutions",
        "Academic alliance/academic affiliation",
        "Students and Sports Organizations",
        "Governments",
        "Accrediting Bodies",
        "Non governmental/non-profit organizations",
        "Educational and Research Enterprises",
        "Information and Communication Enterprises",
        "Others",
        "Campus Life and Food Supply Enterprises"
      ],
      "closeness": [
        "Higher Education and Research Institutions",
        "Academic alliance/academic affiliation",
        "Students and Sports Organizations",
        "Governments",
        "Accrediting Bodies",
        "Imperial College London",
        "Coventry University",
        "London Business School",
        "University of Warwick",
        "Anglia Ruskin University"
      ],
      "centrality": [
        "Higher Education and Research Institutions",
        "Academic alliance/academic affiliation",
        "Students and Sports Organizations",
        "Governments",
        "Accrediting Bodies",
        "Non governmental/non-profit organizations",
        "Educational and Research Enterprises",
        "Information and Communication Enterprises",
        "Others",
        "Campus Life and Food Supply Enterprises"
      ]
    }
  };
</script>

<script>
  const allUniversities = [
  "Abertay University",
  "Aberystwyth University",
  "Anglia Ruskin University",
  "Arden University",
  "Arts University Bournemouth",
  "Arts University Plymouth",
  "Aston University",
  "BIMM University",
  "BPP University",
  "Bangor University",
  "Bath Spa University",
  "Birkbeck, University of London",
  "Birmingham City University",
  "Birmingham Newman University",
  "Bishop Grosseteste University",
  "Bournemouth University",
  "Brunel University of London",
  "Buckinghamshire New University",
  "Canterbury Christ Church University",
  "Cardiff Metropolitan University",
  "Cardiff University",
  "City St George's, University of London",
  "Courtauld Institute of Art",
  "Coventry University",
  "Cranfield University",
  "De Montfort University",
  "Durham University",
  "Edge Hill University",
  "Edinburgh Napier University",
  "Falmouth University",
  "Glasgow Caledonian University",
  "Goldsmiths, University of London",
  "Harper Adams University",
  "Health Sciences University",
  "Heriot-Watt University",
  "Imperial College London",
  "Institute of Cancer Research",
  "Keele University",
  "King's College London",
  "Kingston University",
  "Lancaster University",
  "Leeds Arts University",
  "Leeds Beckett University",
  "Leeds Trinity University",
  "Liverpool Hope University",
  "Liverpool John Moores University",
  "London Business School",
  "London Metropolitan University",
  "London School of Economics",
  "London South Bank University",
  "Loughborough University",
  "Manchester Metropolitan University",
  "Middlesex University",
  "Newcastle University",
  "Northeastern University – London",
  "Northumbria University",
  "Norwich University of the Arts",
  "Nottingham Trent University",
  "Open University",
  "Oxford Brookes University",
  "Plymouth Marjon University",
  "Queen Margaret University",
  "Queen Mary University of London",
  "Queen's University Belfast",
  "Ravensbourne University London",
  "Regent's University London",
  "Richmond American University London",
  "Robert Gordon University",
  "Royal Academy of Music",
  "Royal Agricultural University",
  "Royal Central School of Speech and Drama",
  "Royal Holloway, University of London",
  "Royal Veterinary College",
  "SOAS University of London",
  "Sheffield Hallam University",
  "Southampton Solent University",
  "St George's, University of London",
  "St Mary's University, Twickenham",
  "Swansea University",
  "Teesside University",
  "Ulster University",
  "University College Birmingham",
  "University College London",
  "University for the Creative Arts",
  "University of Aberdeen",
  "University of Bath",
  "University of Bedfordshire",
  "University of Birmingham",
  "University of Bradford",
  "University of Brighton",
  "University of Bristol",
  "University of Buckingham",
  "University of Cambridge",
  "University of Central Lancashire",
  "University of Chester",
  "University of Chichester",
  "University of Cumbria",
  "University of Derby",
  "University of Dundee",
  "University of East Anglia",
  "University of East London",
  "University of Edinburgh",
  "University of Essex",
  "University of Exeter",
  "University of Glasgow",
  "University of Gloucestershire",
  "University of Greenwich",
  "University of Hertfordshire",
  "University of Huddersfield",
  "University of Hull",
  "University of Kent",
  "University of Law",
  "University of Leeds",
  "University of Leicester",
  "University of Lincoln",
  "University of Liverpool",
  "University of London",
  "University of Manchester",
  "University of Northampton",
  "University of Nottingham",
  "University of Oxford",
  "University of Plymouth",
  "University of Portsmouth",
  "University of Reading",
  "University of Roehampton",
  "University of Salford",
  "University of Sheffield",
  "University of South Wales",
  "University of Southampton",
  "University of St Andrews",
  "University of Staffordshire",
  "University of Stirling",
  "University of Strathclyde",
  "University of Suffolk",
  "University of Sunderland",
  "University of Surrey",
  "University of Sussex",
  "University of Wales",
  "University of Wales Trinity Saint David",
  "University of Warwick",
  "University of West London",
  "University of Westminster",
  "University of Winchester",
  "University of Wolverhampton",
  "University of Worcester",
  "University of York",
  "University of the Arts London",
  "University of the Highlands and Islands",
  "University of the West of England",
  "University of the West of Scotland",
  "Wrexham University",
  "York St John University"
];

  function updateUniversitySelection() {
    const viewType = document.getElementById('viewType').value;
    const uniDiv = document.getElementById('universitySelection');
    const uniSelect = document.getElementById('universities');
    if (viewType === 'single') {
      uniDiv.style.display = 'block';
      uniSelect.innerHTML = '';
      allUniversities.forEach(name => {
        const option = document.createElement('option');
        option.value = name;
        option.textContent = name;
        uniSelect.appendChild(option);
      });
    } else {
      uniDiv.style.display = 'none';
    }
  }

  function loadGraph() {
    const graphType = document.getElementById('graphType').value;
    const viewType = document.getElementById('viewType').value;
    const universityList = document.getElementById('universities');

    if (!graphType || !viewType) {
      alert("Please complete both selections.");
      return;
    }

    let file = "";
    if (viewType === "all") {
      if (graphType === "external_entity") file = "university&external_entity.html";
      if (graphType === "external_entity_category") file = "university&external_entity_category.html";
      if (graphType === "internal_entity") file = "university&internal_entity.html";
      if (graphType === "full_view") file = "full_view_subgraphs/full_view_all.html";
    } else {
      const selected = universityList.value.replace(/ /g, "_");
      if (graphType === "external_entity") file = `external_entity_subgraphs/external_entity_single_${selected}.html`;
      if (graphType === "external_entity_category") file = `external_category_subgraphs/external_entity_category_single_${selected}.html`;
      if (graphType === "internal_entity") file = `internal_entity_subgraphs/internal_entity_single_${selected}.html`;
      if (graphType === "full_view") file = `full_view_subgraphs/full_view_single_${selected}.html`;
    }

    // 设置图
    document.getElementById("graphFrame").src = file;
    document.getElementById("graphFrame").style.display = "block";

    // 提取简化 key，用于从内联数据中获取
    const statsKey = viewType === "all" ? graphType : null;
    const data = statsKey ? graphStatsData[`university&${statsKey}`] : null;

    if (data) {
      document.getElementById("graphStats").innerHTML = `
        <b>📊 Network Statistics</b><br>
        Number of Nodes: <b>${data.nodes}</b><br>
        Number of Edges: <b>${data.edges}</b><br><br>
        <b>Top 10 nodes with highest betweenness scores:</b><br>${data.betweenness.join(", ")}<br><br>
        <b>Top 10 nodes with highest closeness scores:</b><br>${data.closeness.join(", ")}<br><br>
        <b>Top 10 nodes with highest degrees of centrality:</b><br>${data.centrality.join(", ")}
      `;
    } else {
      document.getElementById("graphStats").innerHTML = "<i>No statistics available for this graph.</i>";
    }
  }
</script>

</body>
</html>
